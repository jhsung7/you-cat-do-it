import{u as W,a as Q,r as o,j as e}from"./index-ff_Z8oB1.js";import{u as L}from"./healthStore-DqCSjk-d.js";import{d as q,l as X,s as Y}from"./medicationStorage-CnClPTVA.js";const Z=[{id:"rem-1",title:"Hairball Supplement Due",description:"Today",color:"bg-amber-50 border-amber-100 text-amber-900"},{id:"rem-2",title:"Flea Prevention",description:"Due in 5 days",color:"bg-blue-50 border-blue-100 text-blue-900"}],_=[{id:"hist-1",name:"Antibiotics (Amoxicillin)",dosage:"50mg",period:"Oct 1, 2025 - Oct 14, 2025",reason:"Upper respiratory infection"},{id:"hist-2",name:"Pain Relief (Meloxicam)",dosage:"0.5ml",period:"Sep 15, 2025 - Sep 20, 2025",reason:"Post-dental cleaning"}],ee=[{id:"visit-1",title:"Next Vet Visit",date:"Dec 20, 2025",location:"Happy Paws Animal Hospital",notes:"Annual wellness exam and booster"},{id:"visit-2",title:"Dental Follow-up",date:"Jan 05, 2026",location:"Downtown Cat Clinic",notes:"Check healing progress after cleaning"}],G=(a,i)=>{switch(a){case"food":return i==="ko"?"식사량":"Food intake";case"water":return i==="ko"?"수분 섭취":"Water intake";case"litter":return i==="ko"?"배변 활동":"Litter activity";default:return a}};function le(){const{t:a,i18n:i}=W(),{selectedCat:l}=Q(),{loadSymptoms:v,symptoms:R,deleteSymptom:V,loadVetVisits:w,vetVisits:F,addVetVisit:$,deleteVetVisit:E,loadHealthLogs:k}=L(),[h,m]=o.useState(q),[b,j]=o.useState(null),[n,p]=o.useState(null),[C,f]=o.useState(!1),[r,c]=o.useState({name:"",dosage:"",frequency:"",instructions:"",nextDose:"",lastGiven:""}),[d,y]=o.useState({date:"",hospitalName:"",visitReason:""});o.useEffect(()=>{l?(k(l.id),v(l.id),w(l.id),m(X(l.id))):m(q)},[l,v,w,k]),o.useEffect(()=>{l&&Y(l.id,h)},[h,l]);const D=l?R:[],P=L(s=>l?s.anomaliesByCat[l.id]:void 0)||[],H=l?i.language==="ko"?`${l.name} ${a("healthLog.title")}`:`${l.name}'s Health Log`:a("healthLog.title"),S=[...F].sort((s,t)=>s.timestamp-t.timestamp),I=a("medicationsPage.none",{defaultValue:i.language==="ko"?"등록된 약이 없습니다.":"No medications yet."}),A=s=>s.toLocaleDateString(i.language==="ko"?"ko-KR":"en-US",{month:"short",day:"numeric",year:"numeric"}),U=s=>{j(s.id),p({...s})},T=()=>{j(null),p(null)},O=()=>{!b||!n||(m(s=>s.map(t=>t.id===b?n:t)),j(null),p(null))},g=(s,t)=>{p(x=>x&&{...x,[s]:t})},z=()=>{if(!r.name||!r.dosage)return;const s={id:crypto.randomUUID(),name:r.name,dosage:r.dosage,frequency:r.frequency||(i.language==="ko"?"1일 1회":"Once daily"),instructions:r.instructions||"",nextDose:r.nextDose||new Date().toLocaleDateString(),lastGiven:r.lastGiven||"-"};m(t=>[...t,s]),c({name:"",dosage:"",frequency:"",instructions:"",nextDose:"",lastGiven:""}),f(!1)},M=s=>{m(t=>t.filter(x=>x.id!==s)),b===s&&(j(null),p(null))},B=s=>{const t=new Date;m(x=>x.map(N=>{if(N.id!==s)return N;const u=new Date(t);return N.frequency.toLowerCase().includes("month")?u.setMonth(u.getMonth()+1):u.setDate(u.getDate()+1),{...N,lastGiven:A(t),nextDose:A(u)}}))},J=s=>{if(s.preventDefault(),!l||!d.date||!d.hospitalName)return;const t=new Date(d.date).getTime();$({id:crypto.randomUUID(),catId:l.id,date:d.date,timestamp:t,hospitalName:d.hospitalName,visitReason:d.visitReason}),y({date:"",hospitalName:"",visitReason:""})},K=s=>{E(s)};return e.jsxs("div",{className:"space-y-8",children:[e.jsx("header",{className:"rounded-3xl bg-white p-6 shadow-sm",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("p",{className:"text-sm font-semibold uppercase tracking-wide text-indigo-600",children:a("nav.healthRecords")}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:l?l.name:a("healthLog.selectCatFirst")}),e.jsx("p",{className:"text-sm text-gray-500",children:a("healthLog.selectCatDescription")})]})}),l&&e.jsxs("section",{className:"rounded-3xl bg-white p-6 shadow-sm",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("p",{className:"text-sm font-semibold text-gray-500",children:i.language==="ko"?"최근 이상 징후":"Recent anomalies"})}),P.length===0?e.jsx("p",{className:"mt-3 text-sm text-gray-500",children:i.language==="ko"?"현재 감지된 이상 패턴이 없습니다.":"No rolling-window anomalies detected right now."}):e.jsx("div",{className:"mt-3 space-y-3",children:P.map(s=>e.jsxs("div",{className:`rounded-2xl border p-4 text-sm ${s.severity==="critical"?"border-red-200 bg-red-50 text-red-800":"border-amber-200 bg-amber-50 text-amber-900"}`,children:[e.jsx("p",{className:"font-semibold",children:i.language==="ko"?`${G(s.metric,i.language)} 이상`:`${G(s.metric,i.language)} anomaly`}),e.jsx("p",{className:"mt-1 text-sm",children:s.description})]},s.id))})]}),e.jsxs("section",{id:"medications",className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"rounded-3xl bg-white p-6 shadow-sm lg:col-span-2",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-500",children:a("medicationsPage.activeSection")}),e.jsx("p",{className:"text-sm text-gray-400",children:a("medicationsPage.subtitle")})]}),e.jsx("button",{onClick:()=>f(s=>!s),className:"rounded-full border border-indigo-200 px-4 py-1 text-xs font-semibold text-indigo-600 hover:bg-indigo-50",children:C?a("catProfile.cancel"):`+ ${a("medicationsPage.addMedication")}`})]}),C&&e.jsxs("div",{className:"mt-4 rounded-2xl border border-dashed border-indigo-200 bg-indigo-50/40 p-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-gray-500",children:"Name"}),e.jsx("input",{value:r.name,onChange:s=>c(t=>({...t,name:s.target.value})),className:"mt-1 w-full rounded-2xl border border-gray-200 px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-gray-500",children:"Dosage"}),e.jsx("input",{value:r.dosage,onChange:s=>c(t=>({...t,dosage:s.target.value})),className:"mt-1 w-full rounded-2xl border border-gray-200 px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-gray-500",children:"Frequency"}),e.jsx("input",{value:r.frequency,onChange:s=>c(t=>({...t,frequency:s.target.value})),className:"mt-1 w-full rounded-2xl border border-gray-200 px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-gray-500",children:a("medicationsPage.nextDose")}),e.jsx("input",{value:r.nextDose,onChange:s=>c(t=>({...t,nextDose:s.target.value})),className:"mt-1 w-full rounded-2xl border border-gray-200 px-3 py-2"})]})]}),e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2 mt-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-gray-500",children:a("medicationsPage.lastGiven")}),e.jsx("input",{value:r.lastGiven,onChange:s=>c(t=>({...t,lastGiven:s.target.value})),className:"mt-1 w-full rounded-2xl border border-gray-200 px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-gray-500",children:"Instructions"}),e.jsx("input",{value:r.instructions,onChange:s=>c(t=>({...t,instructions:s.target.value})),className:"mt-1 w-full rounded-2xl border border-gray-200 px-3 py-2"})]})]}),e.jsxs("div",{className:"mt-3 flex gap-2",children:[e.jsx("button",{onClick:z,className:"flex-1 rounded-2xl bg-indigo-600 px-4 py-2 text-sm font-semibold text-white",children:a("catProfile.save")}),e.jsx("button",{onClick:()=>f(!1),className:"flex-1 rounded-2xl border border-gray-200 px-4 py-2 text-sm font-semibold text-gray-600",children:a("catProfile.cancel")})]})]}),e.jsxs("div",{className:"mt-6 space-y-4",children:[h.map(s=>e.jsx("div",{className:"rounded-2xl border border-gray-100 p-5",children:b===s.id&&n?e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-gray-400",children:"Name"}),e.jsx("input",{value:n.name,onChange:t=>g("name",t.target.value),className:"mt-1 w-full rounded-2xl border border-gray-200 px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-gray-400",children:"Dosage"}),e.jsx("input",{value:n.dosage,onChange:t=>g("dosage",t.target.value),className:"mt-1 w-full rounded-2xl border border-gray-200 px-3 py-2"})]})]}),e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-gray-400",children:"Frequency"}),e.jsx("input",{value:n.frequency,onChange:t=>g("frequency",t.target.value),className:"mt-1 w-full rounded-2xl border border-gray-200 px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-gray-400",children:"Next dose"}),e.jsx("input",{value:n.nextDose,onChange:t=>g("nextDose",t.target.value),className:"mt-1 w-full rounded-2xl border border-gray-200 px-3 py-2"})]})]}),e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-gray-400",children:"Last given"}),e.jsx("input",{value:n.lastGiven,onChange:t=>g("lastGiven",t.target.value),className:"mt-1 w-full rounded-2xl border border-gray-200 px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-gray-400",children:"Instructions"}),e.jsx("input",{value:n.instructions,onChange:t=>g("instructions",t.target.value),className:"mt-1 w-full rounded-2xl border border-gray-200 px-3 py-2"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[e.jsx("button",{onClick:T,className:"flex-1 rounded-2xl border border-gray-200 px-4 py-2 text-sm font-semibold text-gray-600",children:a("catProfile.cancel")}),e.jsx("button",{onClick:O,className:"flex-1 rounded-2xl bg-indigo-600 px-4 py-2 text-sm font-semibold text-white",children:a("catProfile.save")}),e.jsx("button",{onClick:()=>M(s.id),className:"rounded-2xl border border-red-200 px-4 py-2 text-sm font-semibold text-red-600 hover:bg-red-50",children:a("catProfile.delete")})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.dosage," · ",s.frequency]}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:s.instructions})]}),e.jsx("div",{className:"flex flex-col items-end gap-2",children:e.jsx("span",{className:"rounded-full bg-green-50 px-3 py-1 text-xs font-semibold text-green-700",children:a("medicationsPage.statusActive")})})]}),e.jsxs("div",{className:"mt-4 grid gap-4 text-sm text-gray-600 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-400",children:a("medicationsPage.nextDose")}),e.jsx("p",{className:"mt-1 font-semibold text-gray-900",children:s.nextDose})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-400",children:a("medicationsPage.lastGiven")}),e.jsx("p",{className:"mt-1 font-semibold text-gray-900",children:s.lastGiven})]})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>U(s),className:"rounded-2xl border border-gray-200 px-4 py-2 text-sm font-semibold text-gray-600 hover:border-indigo-200 hover:text-indigo-600",children:a("catProfile.edit")}),e.jsx("button",{onClick:()=>B(s.id),className:"rounded-2xl border border-green-200 px-4 py-2 text-sm font-semibold text-green-700 hover:bg-green-50",children:a("medicationsPage.markAsGiven")}),e.jsx("button",{onClick:()=>M(s.id),className:"rounded-2xl border border-red-200 px-4 py-2 text-sm font-semibold text-red-600 hover:bg-red-50",children:a("catProfile.delete")})]})]})},s.id)),h.length===0&&e.jsx("p",{className:"text-sm text-gray-500",children:I})]})]}),e.jsxs("div",{className:"space-y-4",id:"appointments",children:[e.jsxs("div",{className:"rounded-3xl bg-white p-6 shadow-sm",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-500",children:a("nav.appointments")}),e.jsxs("form",{onSubmit:J,className:"mt-4 space-y-3 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-gray-400",children:a("healthLog.date")}),e.jsx("input",{type:"date",value:d.date,onChange:s=>y(t=>({...t,date:s.target.value})),className:"mt-1 w-full rounded-2xl border border-gray-200 px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-gray-400",children:i.language==="ko"?"병원":"Clinic"}),e.jsx("input",{value:d.hospitalName,onChange:s=>y(t=>({...t,hospitalName:s.target.value})),className:"mt-1 w-full rounded-2xl border border-gray-200 px-3 py-2",placeholder:"Happy Paws Clinic",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-gray-400",children:i.language==="ko"?"방문 목적":"Visit reason"}),e.jsx("input",{value:d.visitReason,onChange:s=>y(t=>({...t,visitReason:s.target.value})),className:"mt-1 w-full rounded-2xl border border-gray-200 px-3 py-2",placeholder:i.language==="ko"?"예: 예방접종":"e.g., Vaccine follow-up"})]}),e.jsxs("button",{className:"w-full rounded-2xl bg-indigo-600 px-4 py-2 text-sm font-semibold text-white",children:["+ ",i.language==="ko"?"예약 추가":"Add appointment"]})]}),e.jsxs("div",{className:"mt-4 space-y-3",children:[S.length===0&&e.jsx("p",{className:"text-xs text-gray-500",children:i.language==="ko"?"예정된 진료가 없습니다.":"No appointments scheduled."}),S.map(s=>e.jsxs("div",{className:"rounded-2xl border border-gray-100 p-3 text-xs text-gray-600",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:s.hospitalName}),e.jsx("p",{children:s.date}),e.jsx("p",{className:"italic",children:s.visitReason}),e.jsx("button",{onClick:()=>K(s.id),className:"mt-2 text-red-600 underline",children:a("catProfile.delete")})]},s.id))]})]}),e.jsxs("div",{className:"rounded-3xl bg-white p-6 shadow-sm",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-500",children:a("medicationsPage.reminders")}),e.jsxs("div",{className:"mt-4 space-y-3",children:[Z.map(s=>e.jsxs("div",{className:`rounded-2xl border p-4 ${s.color}`,children:[e.jsx("p",{className:"text-sm font-semibold",children:s.title}),e.jsx("p",{className:"text-xs text-gray-600",children:s.description})]},s.id)),ee.map(s=>e.jsxs("div",{className:"rounded-2xl border border-gray-100 p-4",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:s.title}),e.jsx("p",{className:"text-xs text-gray-500",children:s.date}),e.jsx("p",{className:"text-sm text-gray-600",children:s.location}),e.jsx("p",{className:"text-xs text-gray-500",children:s.notes})]},s.id))]})]})]})]}),e.jsxs("section",{className:"rounded-3xl bg-white p-6 shadow-sm",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-500",children:H}),e.jsx("p",{className:"text-sm text-gray-400",children:i.language==="ko"?"저장된 증상 기록":"Logged symptoms from Symptom Checker"})]})}),D.length===0?e.jsx("p",{className:"mt-4 text-sm text-gray-500",children:i.language==="ko"?"증상 기록이 없습니다.":"No symptoms logged yet."}):e.jsx("div",{className:"mt-4 space-y-3",children:D.map(s=>e.jsxs("div",{className:"rounded-2xl border border-gray-100 p-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsxs("p",{className:"font-semibold text-gray-900",children:[s.date," · ",s.symptomType]}),e.jsx("span",{className:"rounded-full bg-slate-100 px-2 py-0.5 text-xs capitalize text-slate-700",children:s.severity})]}),e.jsx("p",{className:"mt-2 text-gray-700",children:s.description}),e.jsxs("div",{className:"mt-2 flex items-center justify-between text-xs text-gray-500",children:[e.jsx("span",{children:i.language==="ko"?`긴급도: ${s.urgency}`:`Urgency: ${s.urgency}`}),e.jsx("button",{onClick:()=>V(s.id),className:"text-red-600 underline",children:a("catProfile.delete")})]})]},s.id))})]}),e.jsxs("section",{id:"medications",className:"rounded-3xl bg-white p-6 shadow-sm",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-500",children:a("medicationsPage.history")}),e.jsx("p",{className:"text-sm text-gray-400",children:a("medicationsPage.subtitle")})]})}),e.jsx("div",{className:"mt-6 grid gap-4 md:grid-cols-2",children:_.map(s=>e.jsxs("div",{className:"rounded-2xl border border-gray-100 p-5",children:[e.jsx("p",{className:"text-base font-semibold text-gray-900",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600",children:s.dosage}),e.jsx("p",{className:"text-xs text-gray-500",children:s.period}),e.jsx("p",{className:"text-xs text-gray-500",children:s.reason})]},s.id))})]})]})}export{le as default};
